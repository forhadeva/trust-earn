<!DOCTYPE html>
<html lang="bn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earning Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-50 text-gray-800 font-sans pb-20 md:pb-0">

    <nav class="bg-sky-500 text-white shadow-md">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="text-xl font-bold tracking-wider">TomatoüçÖ</div>
            <div class="hidden md:flex space-x-8">
                <a href="index.html" class="hover:text-sky-200 font-medium transition">Home</a>
                <a href="task.html" class="hover:text-sky-200 font-medium transition">Task</a>
                <a href="refer.html" class="hover:text-sky-200 font-medium transition">Refer</a>
                <a href="profile.html" class="hover:text-sky-200 font-medium transition">Profile</a>
            </div>
        </div>
    </nav>

    <main class="max-w-md md:max-w-4xl mx-auto px-4 py-8 mt-4">

        <div class="bg-white rounded-2xl shadow-sm p-6 border-t-4 border-sky-500 text-center" id="account-status-card">
            <h1 class="text-2xl font-bold text-gray-800 mb-2">‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!</h1>

            <div id="inactive-content">
                <p class="text-gray-500 mb-6 text-sm md:text-base">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶è‡¶ñ‡¶®‡ßã ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶®‡ßü‡•§ ‡¶ï‡¶æ‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶§‡ßá
                    ‡¶è‡¶¨‡¶Ç
                    ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡ß´‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ü‡¶ú‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>

                <div class="bg-red-50 rounded-lg p-4 mb-6 inline-block w-full border border-red-100">
                    <p class="text-lg font-semibold text-red-800">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: <span
                            class="text-red-600 font-bold">Inactive</span></p>
                </div><br>

                <button onclick="handleActivation()" id="btn-activate"
                    class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transition duration-300 w-full md:w-auto">
                    ‡ßß‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>

            <div id="active-content" class="hidden">
                <p class="text-gray-500 mb-6 text-sm md:text-base">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶è‡¶ñ‡¶® ‡¶Ü‡¶™‡¶®‡¶ø
                    ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</p>

                <div class="bg-green-50 rounded-lg p-4 mb-6 inline-block w-full border border-green-100">
                    <p class="text-lg font-semibold text-green-800">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: <span
                            class="text-green-600 font-bold">Active</span></p>
                </div><br>

                <button onclick="window.location.href='task.html'"
                    class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transition duration-300 w-full md:w-auto">
                    ‡¶ï‡¶æ‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-4 mt-6">
            <div class="bg-white p-4 rounded-2xl shadow-sm text-center border border-gray-100">
                <p class="text-gray-500 text-sm mb-1">‡¶Æ‡ßÇ‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</p>
                <p class="text-xl font-bold text-sky-600" id="home-balance">Loading...</p>
            </div>
            <div class="bg-white p-4 rounded-2xl shadow-sm text-center border border-gray-100">
                <p class="text-gray-500 text-sm mb-1">‡¶Æ‡ßã‡¶ü ‡¶∞‡ßá‡¶´‡¶æ‡¶∞</p>
                <p class="text-xl font-bold text-sky-600" id="home-refers">Loading...</p>
            </div>
        </div>

    </main>

    <div
        class="md:hidden fixed bottom-0 w-full bg-white border-t border-gray-200 flex justify-around items-center py-3 text-xs text-gray-500 z-50">
        <a href="index.html" class="flex flex-col items-center text-sky-500">
            <svg class="w-6 h-6 mb-1" fill="currentColor" viewBox="0 0 20 20">
                <path
                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z">
                </path>
            </svg>
            <span class="font-medium">Home</span>
        </a>
        <a href="task.html" class="flex flex-col items-center hover:text-sky-500 transition">
            <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01">
                </path>
            </svg>
            <span class="font-medium">Task</span>
        </a>
        <a href="refer.html" class="flex flex-col items-center hover:text-sky-500 transition">
            <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z">
                </path>
            </svg>
            <span class="font-medium">Refer</span>
        </a>
        <a href="profile.html" class="flex flex-col items-center hover:text-sky-500 transition">
            <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            <span class="font-medium">Profile</span>
        </a>
    </div>

    <div id="custom-popup"
        class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm transition-opacity opacity-0">
        <div class="bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-2xl transform scale-95 transition-all"
            id="popup-content">
            <div class="p-6 text-center">
                <div id="popup-icon-container"
                    class="w-16 h-16 mx-auto bg-sky-100 rounded-full flex items-center justify-center mb-4 text-sky-500">
                    <svg id="popup-icon" class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h3 id="popup-title" class="text-xl font-bold text-gray-800 mb-2">Notice</h3>
                <p id="popup-message" class="text-gray-500 text-sm mb-6">Your message here</p>

                <div id="popup-buttons" class="flex gap-3">
                    <button id="btn-popup-cancel"
                        class="flex-1 py-3 px-4 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-xl transition hidden">Cancel</button>
                    <button id="btn-popup-confirm"
                        class="flex-1 py-3 px-4 bg-sky-500 hover:bg-sky-600 text-white font-bold rounded-xl transition">OK</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const sessionId = localStorage.getItem("earn_session_user");
            if (!sessionId) {
                // If not logged in, just show default 0
                document.getElementById('home-balance').innerText = "‡ß≥ ‡ß¶.‡ß¶‡ß¶";
                document.getElementById('home-refers').innerText = "‡ß¶ ‡¶ú‡¶®";
                return;
            }

            const users = JSON.parse(localStorage.getItem("earn_users_v1") || "[]");
            const user = users.find(u => u.id === sessionId);

            if (user) {
                document.getElementById('home-balance').innerText = `‡ß≥ ${(user.balance || 0).toFixed(2)}`;
                document.getElementById('home-refers').innerText = `${user.referrals || 0} ‡¶ú‡¶®`;

                if (user.status === 'Active') {
                    document.getElementById('inactive-content').classList.add('hidden');
                    document.getElementById('active-content').classList.remove('hidden');
                    document.getElementById('account-status-card').classList.replace('border-sky-500', 'border-green-500');
                }
            }
        });

        function showPopup(type, title, message, onConfirm = null) {
            const popup = document.getElementById('custom-popup');
            const popupContent = document.getElementById('popup-content');
            const iconContainer = document.getElementById('popup-icon-container');
            const icon = document.getElementById('popup-icon');
            const titleEl = document.getElementById('popup-title');
            const messageEl = document.getElementById('popup-message');
            const btnCancel = document.getElementById('btn-popup-cancel');
            const btnConfirm = document.getElementById('btn-popup-confirm');

            titleEl.innerText = title;
            messageEl.innerText = message;

            // Reset classes
            iconContainer.className = "w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4";
            btnConfirm.className = "flex-1 py-3 px-4 font-bold rounded-xl transition text-white";

            // Setup Type (Info, Success, Error, Confirm)
            if (type === 'success') {
                iconContainer.classList.add('bg-green-100', 'text-green-500');
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>';
                btnConfirm.classList.add('bg-green-500', 'hover:bg-green-600');
                btnCancel.classList.add('hidden');
                btnConfirm.innerText = "‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá";
            } else if (type === 'error') {
                iconContainer.classList.add('bg-red-100', 'text-red-500');
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>';
                btnConfirm.classList.add('bg-red-500', 'hover:bg-red-600');
                btnCancel.classList.add('hidden');
                btnConfirm.innerText = "‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®";
            } else if (type === 'confirm') {
                iconContainer.classList.add('bg-sky-100', 'text-sky-500');
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>';
                btnConfirm.classList.add('bg-sky-500', 'hover:bg-sky-600');
                btnCancel.classList.remove('hidden');
                btnCancel.innerText = "‡¶®‡¶æ, ‡¶•‡¶æ‡¶ï";
                btnConfirm.innerText = "‡¶π‡ßç‡¶Ø‡¶æ‡¶Å, ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡¶¨";
            }

            // Show Popup
            popup.classList.remove('hidden');
            setTimeout(() => {
                popup.classList.remove('opacity-0');
                popupContent.classList.remove('scale-95');
                popupContent.classList.add('scale-100');
            }, 10);

            // Cleanup old listeners
            const oldConfirm = btnConfirm.cloneNode(true);
            btnConfirm.parentNode.replaceChild(oldConfirm, btnConfirm);

            const oldCancel = btnCancel.cloneNode(true);
            btnCancel.parentNode.replaceChild(oldCancel, btnCancel);

            // Add new listeners
            document.getElementById('btn-popup-confirm').addEventListener('click', () => {
                closePopup();
                if (onConfirm) onConfirm();
            });

            document.getElementById('btn-popup-cancel').addEventListener('click', closePopup);
        }

        function closePopup() {
            const popup = document.getElementById('custom-popup');
            const popupContent = document.getElementById('popup-content');

            popup.classList.add('opacity-0');
            popupContent.classList.remove('scale-100');
            popupContent.classList.add('scale-95');

            setTimeout(() => {
                popup.classList.add('hidden');
            }, 300);
        }

        function handleActivation() {
            const sessionId = localStorage.getItem("earn_session_user");
            if (!sessionId) return window.location.href = "login.html";

            const users = JSON.parse(localStorage.getItem("earn_users_v1") || "[]");
            const userIndex = users.findIndex(u => u.id === sessionId);

            if (userIndex > -1) {
                const user = users[userIndex];
                if (user.balance >= 100) {
                    showPopup('confirm', '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠‡ßá‡¶∂‡¶®', '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶Ü‡¶õ‡ßá‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡ßß‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶ï‡ßá‡¶ü‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?', () => {
                        users[userIndex].balance -= 100;
                        users[userIndex].status = "Active";
                        localStorage.setItem("earn_users_v1", JSON.stringify(users));

                        showPopup('success', '‡¶∏‡¶´‡¶≤!', '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶π‡ßü‡ßá‡¶õ‡ßá!', () => {
                            window.location.reload();
                        });
                    });
                } else {
                    showPopup('error', '‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á', '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á‡•§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡ßß‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', () => {
                        window.location.href = "deposit.html";
                    });
                }
            }
        }
    </script>
</body>

</html>