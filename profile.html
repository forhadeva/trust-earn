<!DOCTYPE html>
<html lang="bn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - Trust Earn</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #f8fafc; }
        .soft-card { background: rgba(255, 255, 255, 0.9); box-shadow: 0 10px 30px -5px rgba(14, 165, 233, 0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.6); border-radius: 25px; }
        .avatar-glow { box-shadow: 0 0 20px rgba(14, 165, 233, 0.4); }
        .btn-gradient { background: linear-gradient(90deg, #0ea5e9 0%, #0284c7 100%); color: white; box-shadow: 0 4px 15px rgba(14, 165, 233, 0.3); }
        .menu-item { transition: all 0.2s ease; cursor: pointer; }
        .menu-item:active { transform: scale(0.98); background: rgba(240, 249, 255, 0.8); }
    </style>
</head>

<body class="text-gray-700 select-none pb-24 md:pb-0">

    <nav class="bg-sky-500 text-white shadow-md md:block hidden">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="text-xl font-bold tracking-wider">Trust Earn</div>
            <div class="flex space-x-8">
                <a href="index.html" class="hover:text-sky-200 font-medium transition">Home</a>
                <a href="task.html" class="hover:text-sky-200 font-medium transition">Task</a>
                <a href="refer.html" class="hover:text-sky-200 font-medium transition">Refer</a>
                <a href="profile.html" class="text-sky-200 font-bold border-b-2 border-sky-200 pb-1">Profile</a>
            </div>
        </div>
    </nav>

    <div class="md:hidden bg-sky-500 px-6 pt-6 pb-4 text-center rounded-b-3xl shadow-md">
        <h2 class="text-xl font-bold text-white">My Profile</h2>
    </div>

    <main class="max-w-md md:max-w-4xl mx-auto px-4 mt-6 mb-8 flex flex-col gap-5">

        <div class="soft-card p-6 flex flex-col items-center relative">
            <div class="w-24 h-24 rounded-full p-1 bg-white avatar-glow mb-3 relative">
                <img id="user-avatar" src="https://ui-avatars.com/api/?name=User&background=0ea5e9&color=fff&size=128" alt="Profile" class="w-full h-full rounded-full object-cover">
            </div>

            <h2 id="user-name" class="text-lg font-bold text-gray-800 tracking-wide uppercase">Loading...</h2>
            <div id="user-status" class="mt-2 text-xs font-bold flex items-center gap-1 px-4 py-1 rounded-full shadow-sm bg-gray-100 text-gray-500">
                Loading...
            </div>

            <div class="flex w-full gap-4 mt-6">
                <button onclick="window.location.href='deposit.html'" class="flex-1 py-3 rounded-xl btn-gradient font-semibold text-sm flex items-center justify-center gap-2 active:scale-95 transition hover:shadow-lg">
                    <i class="ph-bold ph-wallet text-lg"></i> Deposit
                </button>
                <button onclick="window.location.href='withdraw.html'" class="flex-1 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-semibold text-sm shadow-lg flex items-center justify-center gap-2 active:scale-95 transition">
                    <i class="ph-bold ph-hand-coins text-lg"></i> Withdraw
                </button>
            </div>
        </div>

        <div class="soft-card overflow-hidden">
            <div onclick="window.location.href='deposit-history.html'" class="menu-item p-4 flex items-center justify-between border-b border-gray-100">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 rounded-full bg-sky-50 flex items-center justify-center text-sky-500">
                        <i class="ph-fill ph-clock-counter-clockwise text-xl"></i>
                    </div>
                    <span class="text-sm font-medium text-gray-700">Deposit History</span>
                </div>
                <i class="ph-bold ph-caret-right text-gray-400"></i>
            </div>
            <div onclick="window.location.href='withdraw_history.html'" class="menu-item p-4 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-500">
                        <i class="ph-fill ph-receipt text-xl"></i>
                    </div>
                    <span class="text-sm font-medium text-gray-700">Withdraw History</span>
                </div>
                <i class="ph-bold ph-caret-right text-gray-400"></i>
            </div>
        </div>

        <div class="soft-card overflow-hidden">
            <div onclick="window.location.href='support.html'" class="menu-item p-4 flex items-center justify-between border-b border-gray-100">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 rounded-full bg-purple-50 flex items-center justify-center text-purple-500">
                        <i class="ph-fill ph-headset text-xl"></i>
                    </div>
                    <span class="text-sm font-medium text-gray-700">Support / Help</span>
                </div>
                <i class="ph-bold ph-caret-right text-gray-400"></i>
            </div>
            <div onclick="window.location.href='my-team.html'" class="menu-item p-4 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 rounded-full bg-green-50 flex items-center justify-center text-green-500">
                        <i class="ph-fill ph-users text-xl"></i>
                    </div>
                    <span class="text-sm font-medium text-gray-700">My Team</span>
                </div>
                <i class="ph-bold ph-caret-right text-gray-400"></i>
            </div>
        </div>

        <button onclick="confirmLogout()" class="soft-card w-full p-4 flex items-center justify-center gap-2 text-red-500 font-bold text-sm hover:bg-red-50 transition active:scale-95 border border-red-100">
            <i class="ph-bold ph-sign-out text-lg"></i> Logout
        </button>
    </main>

    <div class="md:hidden fixed bottom-0 w-full bg-white border-t border-gray-200 flex justify-around items-center py-3 text-xs text-gray-500 z-50">
        <a href="index.html" class="flex flex-col items-center hover:text-sky-500 transition"><i class="ph ph-house text-2xl"></i><span>Home</span></a>
        <a href="task.html" class="flex flex-col items-center hover:text-sky-500 transition"><i class="ph ph-clipboard-text text-2xl"></i><span>Task</span></a>
        <a href="refer.html" class="flex flex-col items-center hover:text-sky-500 transition"><i class="ph ph-users-three text-2xl"></i><span>Refer</span></a>
        <a href="profile.html" class="flex flex-col items-center text-sky-500"><i class="ph-fill ph-user-circle text-2xl"></i><span>Profile</span></a>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyD7naXXNpZLZ4nWWSm1bFUKZQHwu5aLCRQ",
            authDomain: "trustearn-a33fc.firebaseapp.com",
            databaseURL: "https://trustearn-a33fc-default-rtdb.firebaseio.com",
            projectId: "trustearn-a33fc",
            storageBucket: "trustearn-a33fc.firebasestorage.app",
            messagingSenderId: "771810262455",
            appId: "1:771810262455:web:713d706a7c6da52ac77c32"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        const userId = localStorage.getItem("earn_session_user");

        if (!userId) {
            window.location.href = "auth.html";
        } else {
            database.ref('users/' + userId).on('value', (snapshot) => {
                const user = snapshot.val();
                if (user) {
                    document.getElementById('user-name').innerText = user.name;
                    document.getElementById('user-avatar').src = `https://ui-avatars.com/api/?name=${encodeURIComponent(user.name)}&background=0ea5e9&color=fff&size=128`;
                    
                    const statusEl = document.getElementById("user-status");
                    if (user.status === "Active") {
                        statusEl.innerHTML = '<i class="ph-fill ph-check-circle text-sm"></i> Active Account';
                        statusEl.className = "mt-2 bg-green-100 border border-green-200 text-green-700 px-4 py-1 rounded-full text-xs font-bold flex items-center gap-1 shadow-sm";
                    } else {
                        statusEl.innerHTML = '<i class="ph-fill ph-x-circle text-sm"></i> Inactive Account';
                        statusEl.className = "mt-2 bg-red-100 border border-red-200 text-red-700 px-4 py-1 rounded-full text-xs font-bold flex items-center gap-1 shadow-sm";
                    }
                } else {
                    window.location.href = "auth.html";
                }
            });
        }

        function confirmLogout() {
            if (confirm("আপনি কি নিশ্চিত যে আপনি লগআউট করতে চান?")) {
                localStorage.removeItem("earn_session_user");
                window.location.href = "auth.html";
            }
        }
    </script>
</body>
</html>




